<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: 回退 | 小毛的胡思乱想]]></title>
  <link href="http://mccxj.github.com/blog/categories/hui-tui/atom.xml" rel="self"/>
  <link href="http://mccxj.github.com/"/>
  <updated>2013-06-30T18:14:17+08:00</updated>
  <id>http://mccxj.github.com/</id>
  <author>
    <name><![CDATA[蔡晓建]]></name>
    <email><![CDATA[mc02cxj@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[生成svn补丁的回退补丁]]></title>
    <link href="http://mccxj.github.com/blog/20120819_reverse-svn-diff-file.html"/>
    <updated>2012-08-19T00:00:00+08:00</updated>
    <id>http://mccxj.github.com/blog/reverse-svn-diff-file</id>
    <content type="html"><![CDATA[<h3>生成回退补丁的脚本</h3>

<p>{% highlight ruby %}
open("C:/Users/peipei/Desktop/svn2.diff", 'w') do |f|</p>

<pre><code>open("C:/Users/peipei/Desktop/svn.diff", 'r') do |ff|
    ff.readlines.each do |line|
        if line.start_with?("@@")
            line =~ /@@\ \-(.+)\ \+(.+)\ @@/
            f &lt;&lt; "@@\ \-#{$2}\ \+#{$1}\ @@\n"
        elsif line.start_with?("+ ")
            f &lt;&lt; "-#{line.slice(1..-1)}"
        elsif line.start_with?("- ")
            f &lt;&lt; "+#{line.slice(1..-1)}"
        else
            f &lt;&lt; line
        end
    end
end
</code></pre>

<p>end
{% endhighlight %}</p>

<h3>其他计划</h3>

<ol>
<li>在codediff工具中添加通过文件名查询功能(已经实现)</li>
<li>通过codediff工具直接生成提交补丁和回退补丁(这个延后)</li>
<li>能够支持补丁合并(这个不是那么好弄)</li>
</ol>


<h3>关于代码评审</h3>

<p>已经有个简单的方案了，我决定在codediff应用上支持每周代码评审功能，这周上线试用一下。</p>
]]></content>
  </entry>
  
</feed>
